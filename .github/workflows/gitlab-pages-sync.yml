name: Sync Jekyll to GitLab Pages

on:
  push:
    branches: [main]

jobs:
  sync-to-gitlab:
    runs-on: ubuntu-latest
    steps:
      - name: â¬‡ï¸ Checkout GitHub repo
        # ä½¿ç”¨ actions/checkout@v4 ç¢ºä¿ç¨‹å¼ç¢¼è¢«æ‹‰å–
        uses: actions/checkout@v4
        # è¨­ç½® fetch-depth: 0 ç¢ºä¿æ‹‰å–å®Œæ•´çš„ Git æ­·å²ï¼Œæœ‰åŠ©æ–¼æ¨é€
        with:
          fetch-depth: 0 

      - name: ğŸ”„ Deploy to GitLab via Action
        uses: wangchao/git-push-action@v2
        with:
          # ğŸš¨ é—œéµï¼šç›´æ¥å°‡ GitLab Token ä½œç‚ºåƒæ•¸å‚³å…¥
          # Action æœƒè‡ªå·±è™•ç†èªè­‰å’Œ URL æ ¼å¼
          token: ${{ secrets.GITLAB_TOKEN }}
          # ğŸš¨ é—œéµï¼šç›®æ¨™å€‰åº« URL (è«‹ç¢ºä¿ä½ å°‡ xxyzyh æ›¿æ›ç‚ºä½ çš„ GitLab ä½¿ç”¨è€…åç¨±)
          remote_url: 'https://gitlab.com/xxyzyh/my-blog.git'
          # ä½¿ç”¨ä½ çš„ GitLab ä½¿ç”¨è€…åç¨±ä½œç‚ºæ¨é€ç”¨æˆ¶
          remote_user: 'xxyzyh' 
          # è¨­ç½®æœ¬åœ°åˆ†æ”¯å’Œé ç¨‹åˆ†æ”¯éƒ½æ˜¯ main
          remote_branch: 'main'
          local_branch: 'main'
          # å¼·åˆ¶æ¨é€ä»¥è¦†è“‹æ½›åœ¨çš„æ­·å²ä¸ä¸€è‡´
          force: true
          # è¨­ç½®æäº¤ç”¨æˆ¶å’Œé›»å­éƒµä»¶
          commit_user_name: 'github-actions[bot]'
          commit_user_email: '41898282+github-actions[bot]@users.noreply.github.com'
          
      - name: âœ… Synchronization Status
        run: echo "ğŸ‰ Code synchronization attempt complete!"

